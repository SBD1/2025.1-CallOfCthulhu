
<!doctype html>
<html lang="pt" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documenta√ß√£o Oficial do Projeto Call of Cthulhu da Disciplina Bancos de Dados da Universidade de Bras√≠lia">
      
      
        <meta name="author" content="Grupo 01 - Engenharia de Requisitos - UnB">
      
      
        <link rel="canonical" href="https://github.com/SBD1/2025.1-CallOfCthulhu/entregas/segunda/DDL/">
      
      
        <link rel="prev" href="../DD/">
      
      
        <link rel="next" href="../DML/">
      
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>DDL - Call of Cthulhu</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="brown">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#linguagem-de-definicao-de-dados-ddl" class="md-skip">
          Pular para conte√∫do
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabe√ßalho">
    <a href="../../.." title="Call of Cthulhu" class="md-header__button md-logo" aria-label="Call of Cthulhu" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Call of Cthulhu
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              DDL
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="brown"  aria-label="Mudar para o tema escuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Mudar para o tema escuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="brown"  aria-label="Mudar para o tema claro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Mudar para o tema claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/SBD1/2025.1-CallOfCthulhu" title="Ir para reposit√≥rio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    CallofCthulhu
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navega√ß√£o" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Call of Cthulhu" class="md-nav__button md-logo" aria-label="Call of Cthulhu" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    Call of Cthulhu
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/SBD1/2025.1-CallOfCthulhu" title="Ir para reposit√≥rio" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    CallofCthulhu
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    In√≠cio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../apresentacao/apresentacao/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Apresenta√ß√£o
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    M√≥dulo 1
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            M√≥dulo 1
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../primeira/DER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../primeira/MER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../primeira/ML/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../primeira/DD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    M√≥dulo 2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            M√≥dulo 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../MER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ML/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DD
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    DDL
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    DDL
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="√çndice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      √çndice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introducao" class="md-nav__link">
    <span class="md-ellipsis">
      Introdu√ß√£o
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metodologia" class="md-nav__link">
    <span class="md-ellipsis">
      Metodologia
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ddl-linguagem-de-definicao-de-dados" class="md-nav__link">
    <span class="md-ellipsis">
      DDL - Linguagem de Defini√ß√£o de Dados
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bibliografia" class="md-nav__link">
    <span class="md-ellipsis">
      üìö Bibliografia
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#historico-de-versoes" class="md-nav__link">
    <span class="md-ellipsis">
      üìë Hist√≥rico de Vers√µes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DML/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../DQL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DQL
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    M√≥dulo 3
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            M√≥dulo 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../terceira/DER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../terceira/MER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../terceira/ML/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../terceira/DD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Trabalho Final
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Trabalho Final
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/DER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/MER/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MER
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/ML/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ML
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../final/DD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DD
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../referencias/referencias/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Refer√™ncias
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="√çndice">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      √çndice
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introducao" class="md-nav__link">
    <span class="md-ellipsis">
      Introdu√ß√£o
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metodologia" class="md-nav__link">
    <span class="md-ellipsis">
      Metodologia
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ddl-linguagem-de-definicao-de-dados" class="md-nav__link">
    <span class="md-ellipsis">
      DDL - Linguagem de Defini√ß√£o de Dados
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bibliografia" class="md-nav__link">
    <span class="md-ellipsis">
      üìö Bibliografia
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#historico-de-versoes" class="md-nav__link">
    <span class="md-ellipsis">
      üìë Hist√≥rico de Vers√µes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="linguagem-de-definicao-de-dados-ddl">Linguagem de Defini√ß√£o de Dados (DDL)</h1>
<h2 id="introducao">Introdu√ß√£o</h2>
<p>A <strong>Linguagem de Defini√ß√£o de Dados (DDL - <em>Data Definition Language</em>)</strong> √© um subconjunto essencial da linguagem SQL, sendo respons√°vel pela <strong>cria√ß√£o, modifica√ß√£o e exclus√£o da estrutura dos bancos de dados</strong>, como tabelas, √≠ndices e relacionamentos. Segundo Elmasri e Navathe, "a DDL fornece comandos para definir esquemas, criar tabelas e estabelecer restri√ß√µes de integridade" <a id="FRM1" href="#REF1">[1]</a>.<br />
A correta defini√ß√£o da estrutura do banco de dados, por meio da DDL, √© fundamental para assegurar a integridade dos dados, otimizar o desempenho e manter a organiza√ß√£o l√≥gica do sistema.</p>
<p>Neste trabalho, apresentamos a modelagem e implementa√ß√£o das tabelas do banco de dados do projeto, utilizando o PostgreSQL como Sistema Gerenciador de Banco de Dados (SGBD). Ao longo do desenvolvimento, foram aplicados conceitos de normaliza√ß√£o, integridade referencial e boas pr√°ticas de projeto, garantindo um banco de dados consistente, eficiente e alinhado aos objetivos da aplica√ß√£o.</p>
<h2 id="metodologia">Metodologia</h2>
<p>A metodologia aplicada neste m√≥dulo seguiu as etapas descritas abaixo:</p>
<ul>
<li><strong>Constru√ß√£o Inicial:</strong> Cria√ß√£o das tabelas com base na modelagem elaborada na etapa anterior<a href="https://sbd1.github.io/2025.1-CallOfCthulhu/entregas/primeira/ML/">Link</a>.</li>
<li><strong>Defini√ß√£o de Dom√≠nios:</strong> Desenvolvimento de tipos personalizados para as tabelas.</li>
<li><strong>Normaliza√ß√£o:</strong> Corre√ß√£o da estrutura e elimina√ß√£o de redund√¢ncias.</li>
<li><strong>Ajustes e Corre√ß√µes:</strong> Solu√ß√£o de bugs, valida√ß√£o de integridade referencial e ajustes conforme o dicion√°rio de dados.</li>
<li><strong>Gera√ß√£o de IDs:</strong> Implementa√ß√£o de fun√ß√µes para gera√ß√£o autom√°tica de identificadores √∫nicos.</li>
</ul>
<hr />
<h2 id="ddl-linguagem-de-definicao-de-dados">DDL - Linguagem de Defini√ß√£o de Dados</h2>
<p>Para acessar o script completo, clique no link a seguir: <a href="https://github.com/SBD1/2025.1-CallOfCthulhu/blob/main/docs/entregas/segunda/ddl.sql">Visualizar DDL no GitHub</a>.</p>
<div class="highlight"><pre><span></span><code>/*

HIST√ìRICO DE VERS√ïES

Vers√£o: 0.1
Data: 28/05/2025
Descri√ß√£o: Criando a vers√£o inicial do ddl com base no c√≥digo do dbdiagram.io
Autor: Luiz Guilherme

Vers√£o: 0.2
Data 29/05/2025
Descri√ß√£o: Adicionando os dom√≠nios para tipos personalizados para as tabelas do banco
Autor: Luiz Guilherme

Vers√£o: 0.3
Data: 30/05/2025
Descri√ß√£o Cria√ß√£o da se√ß√£o de drop tables do ddl
Autor: Luiz Guilherme

Vers√£o: 0.4 
Data: 02/06/2025
Descri√ß√£o: Resolvendo bugs na cria√ß√£o das tabelas
Autor: Luiz Guilherme

Vers√£o: 0.5 
Data: 03/06/2025
Descri√ß√£o: Normaliza√ß√£o do banco, resolu√ß√£o de erros de projeto e solucionamento de bugs
Autor: Luiz Guilherme

Vers√£o: 0.6
Data: 08/06/2025
Descri√ß√£o: Solucionando o bug referente a tabela de inst√¢ncias de itens, adi√ß√£o de novos dom√≠nios para as tabelas do banco, corre√ß√£o dos drop tables
Autor: Luiz Guilherme

Vers√£o: 0.7
Data: 10/06/2025
Descri√ß√£o: Ajustando o DDL para condizer com as informa√ß√µes presentes no dicion√°rio de dados
Autor: Luiz Guilherme

Vers√£o: 0.8
Data: 11/06/2025
Descri√ß√£o: Ajustando as tabelas CREATE DOMAIN public.tipo_personagem AS CHARACTER e CREATE DOMAIN public.sexo AS CHARACTER para varying e comentando a ultima chave estrangeira que e tipo personagem pois estava dando erro verificar depois.
Autor: Christopher e Jo√£o Marcos

Vers√£o: 0.9
Data: 12/06/2025
Descri√ß√£o: Ajustando as tabelas CREATE TABLE public.personagens_jogaveis e adicionando o id integer para criar IDs sem ser manualmente id INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
e a tabela inventario.
Autor: Jo√£o Marcos

Vers√£o: 0.10
Data: 13/06/2025
Descri√ß√£o: Cria√ß√£o de ids especilizados para cada tabela do banco
Autor: Luiz Guilherme

Vers√£o: 0.11
Data: 13/06/2025
Descri√ß√£o: Melhorando os novos dom√≠nios de IDs especializados para cada tabela utilizando o id_geral como base
Autor: Luiz Guilherme

Vers√£o: 0.12
Data: 13/06/2025
Descri√ß√£o: Adicionando as fun√ß√µes que geram os IDs do personagem_jogavel e do invent√°rio de forma autom√°tica garantindo a integridade do banco
Autor: Luiz Guilherme


Vers√£o: 1.0
Data: 14/06/2025
Descri√ß√£o: Adicionando geradores de IDs para as tabelas do banco de dados
Autor: Luiz Guilherme


*/

DROP SCHEMA public CASCADE;
CREATE SCHEMA public;

-- ===============================================

--            DROP TABLES

-- ===============================================

-- PASSO 1: remover os triggers e VIEWS
/*
DROP VIEW IF EXISTS public.view_personagens_jogaveis_completos;

-- PASSO 2: remover as restri√ß√µes de chave estrangeira

-- da tabela de personagens jogaveis
ALTER TABLE public.personagens_jogaveis
DROP CONSTRAINT IF EXISTS fk_pj_inventario;

ALTER TABLE public.personagens_jogaveis
DROP CONSTRAINT IF EXISTS fk_pj_salas;

ALTER TABLE public.personagens_jogaveis
DROP CONSTRAINT IF EXISTS fk_pj_corredores;

ALTER TABLE public.personagens_jogaveis
DROP CONSTRAINT IF EXISTS fk_pj_inventario_instancia_arma;

ALTER TABLE public.personagens_jogaveis
DROP CONSTRAINT IF EXISTS fk_pj_inventario_instancia_armadura;

ALTER TABLE public.personagens_jogaveis
DROP CONSTRAINT IF EXISTS fk_pj_tipos_personagem;

-- da tabela personagens_ possuem_pericias
ALTER TABLE public.personagens_possuem_pericias
DROP CONSTRAINT IF EXISTS fk_personagens_possuem_pericias_pj;

ALTER TABLE public.personagens_possuem_pericias
DROP CONSTRAINT IF EXISTS fk_personagens_possuem_pericias_pericia;

-- da tabela de NPCS
ALTER TABLE public.npcs
DROP CONSTRAINT IF EXISTS fk_npcs_salas;

ALTER TABLE public.npcs
DROP CONSTRAINT IF EXISTS fk_npcs_corredores;

ALTER TABLE public.npcs
DROP CONSTRAINT IF EXISTS fk_npcs_tipos_personagem;

-- da tabela de dialogos
ALTER TABLE public.dialogos
DROP CONSTRAINT IF EXISTS fk_dialogos_npc;

-- da tabela de andares
ALTER TABLE public.andares
DROP CONSTRAINT IF EXISTS fk_andares_templo;

ALTER TABLE public.andares
DROP CONSTRAINT IF EXISTS fk_andares_salas;

-- da tabela corredores_salas_destino
ALTER TABLE public.corredores_salas_destino
DROP CONSTRAINT IF EXISTS fk_corredores_salas_destino_corredores;

ALTER TABLE public.corredores_salas_destino
DROP CONSTRAINT IF EXISTS fk_corredores_salas_destino_salas;

ALTER TABLE public.instancias_de_itens
DROP CONSTRAINT IF EXISTS fk_instancias_de_item_salas;

-- da tabela curas
ALTER TABLE public.curas
DROP CONSTRAINT IF EXISTS fk_curas_itens;

-- da tabela inventarios_possuem_instancias_de_itens
ALTER TABLE public.inventarios_possuem_instancias_item 
DROP CONSTRAINT IF EXISTS fk_inventarios_possuem_instancias_de_item;

ALTER TABLE public.inventarios_possuem_instancias_item 
DROP CONSTRAINT IF EXISTS fk_inventarios_possuem_instancias_de_item_inventario;

-- da tabela magicos
ALTER TABLE public.magicos 
DROP CONSTRAINT IF EXISTS fk_magicos_tipos_feitico;

ALTER TABLE public.magicos 
DROP CONSTRAINT IF EXISTS fk_magicos_itens;

-- da tabela feiticos_status
ALTER TABLE public.feiticos_status 
DROP CONSTRAINT IF EXISTS fk_feiticos_status_tipo_feitico;

-- da tabela feiticos_dano
ALTER TABLE public.feiticos_dano 
DROP CONSTRAINT IF EXISTS fk_feiticos_dano_tipo_feitico;

-- da tabela instancias_monstro
ALTER TABLE public.instancias_monstros
DROP CONSTRAINT IF EXISTS fk_instancias_de_monstro_tipo_monstro;

ALTER TABLE public.instancias_monstros
DROP CONSTRAINT IF EXISTS fk_instancias_monstro_salas;

ALTER TABLE public.instancias_monstros
DROP CONSTRAINT IF EXISTS fk_instancias_monstro_corredores;

ALTER TABLE public.instancias_monstros
DROP CONSTRAINT IF EXISTS fk_instancias_monstro_instancia_de_item;

-- da tabela pacificos
ALTER TABLE public.pacificos
DROP CONSTRAINT IF EXISTS fk_pacificos_tipo_monstro;

-- da tabela agressivos
ALTER TABLE public.agressivos
DROP CONSTRAINT IF EXISTS fk_agressivos_tipo_monstro;

-- da tabela batalhas
ALTER TABLE public.batalhas
DROP CONSTRAINT IF EXISTS fk_batalhas_personagens_jogaveis;

ALTER TABLE public.batalhas
DROP CONSTRAINT IF EXISTS fk_batalhas_monstro;

-- da tabela missoes
ALTER TABLE public.missoes
DROP CONSTRAINT IF EXISTS fk_missoes_npcs;

-- da tabela entregas_missoes
ALTER TABLE public.entregas_missoes
DROP CONSTRAINT IF EXISTS fk_entregas_missoes_personagens_jogaveis;

ALTER TABLE public.entregas_missoes
DROP CONSTRAINT IF EXISTS fk_entregas_missoes_npcs;

-- da tabela de itens
ALTER TABLE public.itens
DROP CONSTRAINT IF EXISTS fk_itens_cura;

ALTER TABLE public.itens
DROP CONSTRAINT IF EXISTS fk_itens_magicos;

ALTER TABLE public.itens
DROP CONSTRAINT IF EXISTS fk_itens_armaduras;

ALTER TABLE public.itens
DROP CONSTRAINT IF EXISTS fk_itens_armas;

-- da tabela invetario
ALTER TABLE public.inventarios
DROP CONSTRAINT IF EXISTS fk_inventarios_instancia_de_item;

-- da tabela agressivos
ALTER TABLE public.agressivos
DROP CONSTRAINT IF EXISTS fk_agressivos_tipos_de_feitico;

-- da tabela tipo_feitico
ALTER TABLE public.tipos_feitico
DROP CONSTRAINT IF EXISTS fk_tipos_feitico_feitico_status;

ALTER TABLE public.tipos_feitico
DROP CONSTRAINT IF EXISTS fk_tipos_feitico_feitico_dano;

-- da tabela tipos_monstros
ALTER TABLE public.tipos_monstro
DROP CONSTRAINT IF EXISTS fk_tipos_monstro_pacificos;

ALTER TABLE public.tipos_monstro
DROP CONSTRAINT IF EXISTS fk_tipos_monstro_agressivo;

-- da tabela instancias_de_itens
ALTER TABLE public.instancias_de_itens
DROP CONSTRAINT IF EXISTS fk_instancias_de_itens_missoes_recompensa;

ALTER TABLE public.instancias_de_itens
DROP CONSTRAINT IF EXISTS fk_instancias_de_itens_missoes_requer;

ALTER TABLE public.instancias_de_itens
DROP CONSTRAINT IF EXISTS fk_instancias_de_item_itens;

-- da tabela armaduras
ALTER TABLE public.armaduras
DROP CONSTRAINT IF EXISTS fk_armaduras_pericia_necessaria;

ALTER TABLE public.armaduras
DROP CONSTRAINT IF EXISTS fk_armaduras_itens;

-- da tabela armas
ALTER TABLE public.armas
DROP CONSTRAINT IF EXISTS fk_armas_pericia_necessaria;

ALTER TABLE public.armas
DROP CONSTRAINT IF EXISTS fk_armas_itens;

-- da tabela tipos_personagem
ALTER TABLE public.tipos_personagem
DROP CONSTRAINT IF EXISTS fk_tipos_personagem_personagens_jogaveis;

ALTER TABLE public.tipos_personagem
DROP CONSTRAINT IF EXISTS fk_tipos_personagem_npc;

-- PASSO 3: remover as tabelas

-- tabelas de juncao primeiro

DROP TABLE IF EXISTS public.personagens_possuem_pericias; --
DROP TABLE IF EXISTS public.inventarios_possuem_instancias_item; --
DROP TABLE IF EXISTS public.corredores_salas_destino; --
DROP TABLE IF EXISTS public.entregas_missoes; --
DROP TABLE IF EXISTS public.batalhas; --

-- tabelas com muitas referencias por ultimo

DROP TABLE IF EXISTS public.tipos_personagem; --
DROP TABLE IF EXISTS public.tipos_feitico; --
DROP TABLE IF EXISTS public.tipos_monstro; --
DROP TABLE IF EXISTS public.instancias_de_itens; --
DROP TABLE IF EXISTS public.itens; --
DROP TABLE IF EXISTS public.pacificos; --
DROP TABLE IF EXISTS public.agressivos; --
DROP TABLE IF EXISTS public.feiticos_dano; --
DROP TABLE IF EXISTS public.feiticos_status; --
DROP TABLE IF EXISTS public.armas; --
DROP TABLE IF EXISTS public.armaduras; --
DROP TABLE IF EXISTS public.curas; --
DROP TABLE IF EXISTS public.magicos; --
DROP TABLE IF EXISTS public.missoes; --
DROP TABLE IF EXISTS public.instancias_monstros; --
DROP TABLE IF EXISTS public.pericias; --
DROP TABLE IF EXISTS public.salas; --
DROP TABLE IF EXISTS public.andares; --
DROP TABLE IF EXISTS public.templos; --
DROP TABLE IF EXISTS public.inventarios; --
DROP TABLE IF EXISTS public.dialogos; --
DROP TABLE IF EXISTS public.npcs; --
DROP TABLE IF EXISTS public.corredores; --
DROP TABLE IF EXISTS public.personagens_jogaveis; --

-- PASSO 4: remover as fun√ß√µes

DROP FUNCTION IF EXISTS public.atualizar_atributos_do_personagem();
DROP FUNCTION IF EXISTS public.calcular_sanidade(INTEGER);
DROP FUNCTION IF EXISTS public.calcular_ideia(INTEGER);
DROP FUNCTION IF EXISTS public.calcular_conhecimento(INTEGER);
DROP FUNCTION IF EXISTS public.calcular_sorte(INTEGER);
DROP FUNCTION IF EXISTS public.calcular_pts_de_vida(INTEGER, INTEGER);

-- PASSO 5: remover os dom√≠nios
DROP DOMAIN IF EXISTS public.gatilho_agressividade;
DROP DOMAIN IF EXISTS public.comportamento_pacifico;
DROP DOMAIN IF EXISTS public.funcao_magica;
DROP DOMAIN IF EXISTS public.funcao_cura;
DROP DOMAIN IF EXISTS public.funcao_arma;
DROP DOMAIN IF EXISTS public.tipo_missao;
DROP DOMAIN IF EXISTS public.tipo_atributo_personagem;
DROP DOMAIN IF EXISTS public.tipo_de_status;
DROP DOMAIN IF EXISTS public.funcao_feitico;
DROP DOMAIN IF EXISTS public.tipo_dano;
DROP DOMAIN IF EXISTS public.funcao_armadura;
DROP DOMAIN IF EXISTS public.tipo_municao;
DROP DOMAIN IF EXISTS public.tipo_item;
DROP DOMAIN IF EXISTS public.tipo_personagem;
DROP DOMAIN IF EXISTS public.tipo_monstro;
DROP DOMAIN IF EXISTS public.tipo_monstro_pacifico;
DROP DOMAIN IF EXISTS public.tipo_monstro_agressivo;
DROP DOMAIN IF EXISTS public.idade;
DROP DOMAIN IF EXISTS public.atributo;
DROP DOMAIN IF EXISTS public.sexo;
DROP DOMAIN IF EXISTS public.dano;
DROP DOMAIN IF EXISTS public.script_dialogo;
DROP DOMAIN IF EXISTS public.local_nascimento;
DROP DOMAIN IF EXISTS public.residencia;
DROP DOMAIN IF EXISTS public.ocupacao;
DROP DOMAIN IF EXISTS public.descricao;
DROP DOMAIN IF EXISTS public.nome;

DROP DOMAIN IF EXISTS public.id_geral;
DROP DOMAIN IF EXISTS public.id_personagem;
DROP DOMAIN IF EXISTS public.id_personagem_jogavel;
DROP DOMAIN IF EXISTS public.id_personagem_npc;
DROP DOMAIN IF EXISTS public.id_monstro
DROP DOMAIN IF EXISTS public.id_monstro_agressivo;
DROP DOMAIN IF EXISTS public.id_monstro_pacifico;
DROP DOMAIN IF EXISTS public.id_item;
DROP DOMAIN IF EXISTS public.id_item_magico;
DROP DOMAIN IF EXISTS public.id_item_de_cura;
DROP DOMAIN IF EXISTS public.id_item_de_armadura;
DROP DOMAIN IF EXISTS public.id_item_arma;
DROP DOMAIN IF EXISTS public.id_localizacao;
DROP DOMAIN IF EXISTS public.id_templo;
DROP DOMAIN IF EXISTS public.id_andar;
DROP DOMAIN IF EXISTS public.id_sala;
DROP DOMAIN IF EXISTS public.id_corredor;
DROP DOMAIN IF EXISTS public.id_missao;
DROP DOMAIN IF EXISTS public.id_feitico;
DROP DOMAIN IF EXISTS public.id_feitico_de_status;
DROP DOMAIN IF EXISTS public.id_feitico_de_dano;
DROP DOMAIN IF EXISTS public.id_dialogo;
DROP DOMAIN IF EXISTS public.id_pericia;
DROP DOMAIN IF EXISTS public.id_instancia_de_item;
DROP DOMAIN IF EXISTS public.id_instancia_de_monstro;

*/
-- ===============================================

--            DOM√çNIOS CRIADOS

-- ===============================================
/*

Essa se√ß√£o do c√≥digo √© destinada a conter todos os dom√≠nios que foram criados ao longo do projeto para garantir uma maior personaliza√ß√£o nos tipos de dados que podem ser utilizados no banco. Os dom√≠nios facilitam a manute√ß√£o do c√≥digo al√©m de garantir uma maior seguran√ßa evitando com que dados incorretos sejam inseridos nas tabelas do banco.

*/

CREATE DOMAIN public.dano AS SMALLINT
    CONSTRAINT dano_check CHECK (
        VALUE &gt;= 1 AND VALUE &lt;= 500
    );  

CREATE DOMAIN public.sexo AS CHARACTER(9)
    CONSTRAINT sexo_check CHECK (
        VALUE = ANY (ARRAY[
            (&#39;masculino&#39;::character(9)), 
            (&#39;feminino&#39;::character(9))
        ])
    );

CREATE DOMAIN public.atributo AS SMALLINT
    CONSTRAINT atributo_check CHECK (
        VALUE &gt;= 3 AND VALUE &lt;= 18
    );

CREATE DOMAIN public.idade AS SMALLINT
    CONSTRAINT idade_check CHECK (
        VALUE &gt;= 1 AND VALUE &lt;= 120
    );

CREATE DOMAIN public.tipo_monstro_agressivo AS CHARACTER VARYING(8)
    CONSTRAINT tipo_monstro_agressivo_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;psiquico&#39;::character VARYING)::text, 
            (&#39;magico&#39;::character VARYING)::text,
            (&#39;fisico&#39;::character VARYING)::text
        ])
    );

CREATE DOMAIN public.tipo_monstro_pacifico AS CHARACTER VARYING(12)
    CONSTRAINT tipo_monstro_pacifico_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;humanoide&#39;::character VARYING)::text, 
            (&#39;sobrenatural&#39;::character VARYING)::text
        ])
    );

CREATE DOMAIN public.tipo_monstro AS CHARACTER VARYING(9)
    CONSTRAINT tipo_monstro_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;agressivo&#39;::character VARYING)::text, 
            (&#39;pac√≠fico&#39;::character VARYING)::text
        ])
    );

CREATE DOMAIN public.tipo_personagem AS CHARACTER VARYING(18)
    CONSTRAINT tipo_personagem_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;personagem jogavel&#39;::CHARACTER VARYING)::text, 
            (&#39;NPC&#39;::CHARACTER VARYING)::text
        ])
    );

 CREATE DOMAIN public.tipo_item AS CHARACTER VARYING(8)
    CONSTRAINT tipo_item_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;armadura&#39;::character VARYING)::text, 
            (&#39;arma&#39;::character VARYING)::text,
            (&#39;cura&#39;::character VARYING)::text
        ])
    );   

 CREATE DOMAIN public.tipo_municao AS CHARACTER(13)
    CONSTRAINT tipo_municao_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;baixo-calibre&#39;::character)::text, 
            (&#39;medio-calibre&#39;::character)::text,
            (&#39;alto-calibre&#39;::character)::text
        ])
    );  

 CREATE DOMAIN public.funcao_armadura AS CHARACTER(8)
    CONSTRAINT funcao_armadura_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;cabeca&#39;::character)::text, 
            (&#39;peitoral&#39;::character)::text,
            (&#39;bracos&#39;::character)::text,
            (&#39;pernas&#39;::character)::text,
            (&#39;pes&#39;::character)::text,
            (&#39;mao&#39;::character)::text
        ])
    );    

 CREATE DOMAIN public.tipo_dano AS CHARACTER(5)
    CONSTRAINT tipo_dano_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;area&#39;::character)::text, 
            (&#39;unico&#39;::character)::text
        ])
    );     

CREATE DOMAIN public.funcao_feitico AS CHARACTER(6)
    CONSTRAINT funcao_feitico_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;status&#39;::character)::text, 
            (&#39;dano&#39;::character)::text
        ])
    );  

 CREATE DOMAIN public.tipo_de_status AS CHARACTER(8)
    CONSTRAINT tipo_de_status_check CHECK (
        (VALUE)::text = ANY (ARRAY[
            (&#39;vida&#39;::character)::text, 
            (&#39;sanidade&#39;::character)::text
        ])
    );  

CREATE DOMAIN public.tipo_atributo_personagem AS CHARACTER(12)
    CONSTRAINT tipo_atributo_personagem_check CHECK (
        VALUE IN (&#39;forca&#39;, &#39;constituicao&#39;, &#39;poder&#39;, &#39;destreza&#39;, &#39;aparencia&#39;, &#39;tamanho&#39;, &#39;inteligencia&#39;, &#39;educacao&#39;)
    ); 


-- Pode ser alterado a qualquer momento para garantir que mais tuplas se comportem no dml
CREATE DOMAIN public.tipo_missao AS CHARACTER(16)
    CONSTRAINT tipo_missao_check CHECK (
        VALUE IN (&#39;principal&#39;, &#39;secundaria&#39;, &#39;coleta&#39;, &#39;eliminacao&#39;, &#39;escolta&#39;)
    );   

-- Pode ser alterado a qualquer momento para garantir que mais tuplas se comportem no dml
CREATE DOMAIN public.funcao_arma AS CHARACTER(32)
    CONSTRAINT funcao_arma_check CHECK (
        VALUE IN (&#39;corpo_a_corpo_leve&#39;, &#39;corpo_a_corpo_pesada&#39;, &#39;arremesso&#39;, &#39;disparo_unico&#39;, &#39;disparo_rajada&#39;)
    );   

-- Pode ser alterado a qualquer momento para garantir que mais tuplas se comportem no dml
CREATE DOMAIN public.funcao_cura AS CHARACTER(32)
    CONSTRAINT funcao_cura_check CHECK (
        VALUE IN (&#39;restaurar_vida&#39;, &#39;restaurar_sanidade&#39;, &#39;remover_veneno&#39;, &#39;remover_maldicao&#39;, &#39;antidoto_insanidade&#39;)
    );

-- Pode ser alterado a qualquer momento para garantir que mais tuplas se comportem no dml
CREATE DOMAIN public.funcao_magica AS CHARACTER(32)
    CONSTRAINT funcao_magica_check CHECK (
        VALUE IN (&#39;revelar_invisivel&#39;, &#39;abrir_fechadura&#39;, &#39;encantar_arma&#39;, &#39;invocar_criatura&#39;, &#39;teleporte&#39;, &#39;protecao_elemental&#39;)
    );

-- Pode ser alterado a qualquer momento para garantir que mais tuplas se comportem no dml
CREATE DOMAIN public.gatilho_agressividade AS CHARACTER(32)
    CONSTRAINT gatilho_agressividade_check CHECK (
        VALUE IN (&#39;proximidade&#39;, &#39;ataque_direto&#39;, &#39;barulho_alto&#39;, &#39;alvo_especifico&#39;, &#39;horario_noturno&#39;, &#39;ver_item_sagrado&#39;)
    );

-- Pode ser alterado a qualquer momento para garantir que mais tuplas se comportem no dml
CREATE DOMAIN public.comportamento_pacifico AS CHARACTER(32)
    CONSTRAINT comportamento_pacifico_check CHECK (
        VALUE IN (&#39;indiferente&#39;, &#39;medroso&#39;, &#39;amigavel&#39;, &#39;sob_controle_mental&#39;, &#39;adormecido&#39;, &#39;curioso&#39;)
    );


CREATE DOMAIN public.nome AS CHARACTER VARYING(128);

CREATE DOMAIN public.descricao AS CHARACTER VARYING(5000);

CREATE DOMAIN public.ocupacao AS CHARACTER(64);

CREATE DOMAIN public.residencia AS CHARACTER(96);

CREATE DOMAIN public.local_nascimento AS CHARACTER(96);

CREATE DOMAIN public.script_dialogo AS CHARACTER(512); 


-- ===============================================

--            DOM√çNIOS PARA OS IDS

-- ===============================================

-- CRIA√á√ÉO DE UM DOM√çNIO BASE
CREATE DOMAIN public.id_geral AS BIGINT
    CONSTRAINT id_geral CHECK (
        VALUE BETWEEN 10000000 AND 99999999
    );

-- ========== IDS PARA PERSONAGENS =========

-- CRIA√á√ÉO DO DOM√çNIO DOS PERSONAGENS
-- TODO PERSONAGEM TEM ID QUE COME√áA COM 01
CREATE DOMAIN public.id_personagem AS public.id_geral
    CONSTRAINT id_personagem_check CHECK (
        VALUE BETWEEN 10000000 AND 19999999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS PERSONAGENS JOG√ÅVEIS
-- TODO PERSONAGEM JOG√ÅVEL TEM ID QUE COME√áA COM 0101
CREATE DOMAIN public.id_personagem_jogavel AS public.id_personagem
    CONSTRAINT id_personagem_jogavel_check CHECK (
        VALUE BETWEEN 10100000 AND 10199999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS PERSONAGENS NPCS
-- TODO PERSONAGEM NPC COM 0102
CREATE DOMAIN public.id_personagem_npc AS public.id_personagem
    CONSTRAINT id_personagem_npc_check CHECK (
        VALUE BETWEEN 10200000 AND 10209999
);

-- ========== IDS PARA MONSTROS =========

-- CRIA√á√ÉO DO DOM√çNIO DOS PERSONAGENS
-- TODO MONSTRO TEM ID QUE COME√áA COM 02
CREATE DOMAIN public.id_monstro AS public.id_geral
    CONSTRAINT id_monstro_check CHECK (
        VALUE BETWEEN 20000000 AND 29999999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS MONSTROS AGRESSIVOS
-- TODO MONSTRO AGRESSIVOS TEM ID QUE COME√áA COM 0201
CREATE DOMAIN public.id_monstro_agressivo AS public.id_monstro
    CONSTRAINT id_monstro_agressivo_check CHECK (
        VALUE BETWEEN 20100000 AND 20199999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS MONSTROS PAC√çFICOS
-- TODO MONSTRO PAC√çFICOS TEM ID QUE COME√áA COM 0202
CREATE DOMAIN public.id_monstro_pacifico AS public.id_monstro
    CONSTRAINT id_monstro_pacifico_check CHECK (
        VALUE BETWEEN 20200000 AND 20299999
);

-- ========== IDS PARA ITENS =========

-- CRIA√á√ÉO DO DOM√çNIO DOS ITENS
-- TODO ITEM TEM ID QUE COME√áA COM 03
CREATE DOMAIN public.id_item AS public.id_geral
    CONSTRAINT id_item_check CHECK (
        VALUE BETWEEN 30000000 AND 39999999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS ITENS M√ÅGICOS
-- TODO ITEM M√ÅGICO TEM ID QUE COME√áA COM 0301
CREATE DOMAIN public.id_item_magico AS public.id_item
    CONSTRAINT id_item_magico_check CHECK (
        VALUE BETWEEN 30100000 AND 30199999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS ITENS DE CURA
-- TODO ITEM DE CURA TEM ID QUE COME√áA COM 0302
CREATE DOMAIN public.id_item_de_cura AS public.id_item
    CONSTRAINT id_item_de_cura_check CHECK (
        VALUE BETWEEN 30200000 AND 30299999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS ITENS DE ARMADURA
-- TODO ITEM DE ARMADURA TEM ID QUE COME√áA COM 0303
CREATE DOMAIN public.id_item_de_armadura AS public.id_item
    CONSTRAINT id_item_de_armadura_check CHECK (
        VALUE BETWEEN 30300000 AND 30399999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS ITENS DO TIPO ARMA
-- TODO ITEM DO TIPO ARMA TEM ID QUE COME√áA COM 0304
CREATE DOMAIN public.id_item_arma AS public.id_item
    CONSTRAINT id_item_arma_check CHECK (
        VALUE BETWEEN 30400000 AND 30499999
);

-- ========== IDS PARA LOCALIZA√á√ïES =========

-- TODO ITEM DE LOCALIZA√á√ÉO COME√áA COM 04

CREATE DOMAIN public.id_localizacao AS public.id_geral
    CONSTRAINT id_localizacao_check CHECK (
        VALUE BETWEEN 40000000 AND 49999999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS TEMPLOS
-- TODO TEMPLOS TEM ID QUE COME√áA COM 0401
CREATE DOMAIN public.id_templo AS public.id_localizacao
    CONSTRAINT id_templo_check CHECK (
        VALUE BETWEEN 40100000 AND 40199999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS ANDARES
-- TODO ANDAR TEM ID QUE COME√áA COM 0402
CREATE DOMAIN public.id_andar AS public.id_localizacao
    CONSTRAINT id_andar_check CHECK (
        VALUE BETWEEN 40200000 AND 40299999
);

-- CRIA√á√ÉO DO DOM√çNIO DAS SALAS
-- TODA SALA TEM ID QUE COME√áA COM 0403
CREATE DOMAIN public.id_sala AS public.id_localizacao
    CONSTRAINT id_sala_check CHECK (
        VALUE BETWEEN 40300000 AND 40399999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS CORREDORES
-- TODO CORREDOR TEM ID QUE COME√áA COM 0404
CREATE DOMAIN public.id_corredor AS public.id_localizacao
    CONSTRAINT id_corredor_check CHECK (
        VALUE BETWEEN 40400000 AND 40499999
);

-- ========== IDS PARA MISS√ïES =========

-- CRIA√á√ÉO DO DOM√çNIO DAS MISS√ïES
-- TODA MISS√ÉO TEM ID QUE COME√áA COM 05
CREATE DOMAIN public.id_missao AS public.id_geral
    CONSTRAINT id_missao_check CHECK (
    VALUE BETWEEN 50000000 AND 59999999
);

-- ========== IDS PARA FEITI√áOS =========

-- CRIA√á√ÉO DO DOM√çNIO DOS FEITI√áOS
-- TODO FEITI√áO TEM ID QUE COME√áA COM 06
CREATE DOMAIN public.id_feitico AS public.id_geral
    CONSTRAINT id_feitico_check CHECK (
    VALUE BETWEEN 60000000 AND 69999999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS FEITI√áOS DE STATUS
-- TODO FEITI√áO DE STATUS TEM ID QUE COME√áA COM 0601
CREATE DOMAIN public.id_feitico_de_status AS public.id_feitico
    CONSTRAINT id_feitico_de_status_check CHECK (
    VALUE BETWEEN 60100000 AND 60199999
);

-- CRIA√á√ÉO DO DOM√çNIO DOS FEITI√áOS DE DANO
-- TODO FEITI√áO DE DANO TEM ID QUE COME√áA COM 0602
CREATE DOMAIN public.id_feitico_de_dano AS public.id_feitico
    CONSTRAINT id_feitico_de_dano_check CHECK (
    VALUE BETWEEN 60200000 AND 60299999
);

-- ========== IDS PARA OS DI√ÅLOGOS =========

-- CRIA√á√ÉO DO DOM√çNIO DOS DI√ÅLOGOS
-- TODO DI√ÅLOGO TEM ID QUE COME√áA COM 07
CREATE DOMAIN public.id_dialogo AS public.id_geral
    CONSTRAINT id_dialogo_check CHECK (
    VALUE BETWEEN 70000000 AND 79999999
);

-- ========== IDS PARA AS PER√çCIAS =========

-- CRIA√á√ÉO DO DOM√çNIO DAS PER√çCIAS
-- TODA PER√çCIA TEM ID QUE COME√áA COM 08
CREATE DOMAIN public.id_pericia AS public.id_geral
    CONSTRAINT id_pericia_check CHECK (
    VALUE BETWEEN 80000000 AND 89999999
);

-- ========== IDS PARA OS INVET√ÅRIOS =========

-- CRIA√á√ÉO DO DOM√çNIO DOS INVET√ÅRIOS
-- TODO INVET√ÅRIO TEM ID QUE COME√áA COM 09
CREATE DOMAIN public.id_inventario AS public.id_geral
    CONSTRAINT id_inventario_check CHECK (
    VALUE BETWEEN 90000000 AND 99999999
);

-- ========== IDS PARA PERSONAGENS POSSUEM PER√çCIAS =========

-- CRIA√á√ÉO DO DOM√çNIO DOS PERSONAGENS POSSUEM PER√çCIAS
-- TODO PERSONAGENS POSSUEM PER√çCIAS TEM ID QUE COME√áA COM 13
CREATE DOMAIN public.id_personagens_possuem_pericias AS public.id_geral
    CONSTRAINT id_personagens_possuem_pericias_check CHECK (
    VALUE BETWEEN 13000000 AND 13999999
);

-- ========== IDS PARA INST√ÇNCIAS DE ITEM =========

-- CRIA√á√ÉO DO DOM√çNIO DAS INST√ÇNCIAS DE ITEM
-- TODA INST√ÇNCIA DE ITEM TEM ID QUE COME√áA COM 88
CREATE DOMAIN public.id_instancia_de_item AS public.id_geral
    CONSTRAINT id_instancia_de_item_check CHECK (
    VALUE BETWEEN 88000000 AND 88999999
);

-- ========== IDS PARA INST√ÇNCIAS DE MONSTRO =========

-- CRIA√á√ÉO DO DOM√çNIO DAS INST√ÇNCIAS DE MONSTRO
-- TODA INST√ÇNCIA DE MONSTRO TEM ID QUE COME√áA COM 99
CREATE DOMAIN public.id_instancia_de_monstro AS public.id_geral
    CONSTRAINT id_instancia_de_monstro_check CHECK (
    VALUE BETWEEN 99000000 AND 99999999
);

-- ===============================================

--      FUN√á√ïES PARA CALCULAR ATRIBUTOS

-- ===============================================

CREATE FUNCTION calcular_sanidade(valor_poder INTEGER)
RETURNS SMALLINT AS $calcular_sanidade$
BEGIN
    RETURN valor_poder * 5;
END
$calcular_sanidade$ LANGUAGE plpgsql IMMUTABLE;

CREATE FUNCTION calcular_ideia(valor_inteligencia INTEGER)
RETURNS SMALLINT AS $calcular_ideia$
BEGIN
    RETURN valor_inteligencia * 5;
END
$calcular_ideia$ LANGUAGE plpgsql IMMUTABLE;

CREATE FUNCTION calcular_conhecimento(valor_educacao INTEGER)
RETURNS SMALLINT AS $calcular_conhecimento$
BEGIN
    RETURN valor_educacao * 5;
END
$calcular_conhecimento$ LANGUAGE plpgsql IMMUTABLE;

CREATE FUNCTION calcular_sorte(valor_poder INTEGER)
RETURNS SMALLINT AS $calcular_sorte$
BEGIN
    RETURN valor_poder * 5;
END
$calcular_sorte$ LANGUAGE plpgsql IMMUTABLE;

CREATE FUNCTION calcular_pts_de_vida(valor_constituicao INTEGER, valor_tamanho INTEGER)
RETURNS INTEGER AS $calcular_pts_de_vida$
BEGIN
    RETURN (valor_constituicao + valor_tamanho) / 2;
END
$calcular_pts_de_vida$ LANGUAGE plpgsql IMMUTABLE;

-- ===============================================

--      FUN√á√ïES GERADORAS DE ID

-- ===============================================

/*
Essas fun√ß√µes servem para garantir a integridade dos dados do banco, elas geram os ids das tabelas seguindo a regra de ids do banco de forma autom√°tica.
*/

-- GERA O ID DO PR√ìXIMO PERSONAGEM JOGAVEL SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.personagem_jogavel_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_personagem_jogavel()
RETURNS BIGINT AS $gerar_id_personagem_jogavel$
BEGIN
    RETURN 10100000 + nextval(&#39;public.personagem_jogavel_id_seq&#39;);
END;
    $gerar_id_personagem_jogavel$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO NPC SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.personagem_npc_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_personagem_npc()
RETURNS BIGINT AS $gerar_id_personagem_npc$
BEGIN
    RETURN 10200000 + nextval(&#39;public.personagem_npc_id_seq&#39;);
END;
    $gerar_id_personagem_npc$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO MONSTRO AGRESSIVO SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.monstro_agressivo_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_monstro_agressivo()
RETURNS BIGINT AS $gerar_id_monstro_agressivo$
BEGIN
    RETURN 20100000 + nextval(&#39;public.monstro_agressivo_id_seq&#39;);
END;
    $gerar_id_monstro_agressivo$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO MONSTRO PAC√çFICO SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.monstro_pacifico_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_monstro_pacifico()
RETURNS BIGINT AS $gerar_id_monstro_pacifico$
BEGIN
    RETURN 20200000 + nextval(&#39;public.monstro_pacifico_id_seq&#39;);
END;
    $gerar_id_monstro_pacifico$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM M√ÅGICO SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.item_magico_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_item_magico()
RETURNS BIGINT AS $gerar_id_item_magico$
BEGIN
    RETURN 30100000 + nextval(&#39;public.item_magico_id_seq&#39;);
END;
    $gerar_id_item_magico$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM O PADR√ÉO DE IDS
CREATE SEQUENCE public.item_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_item()
RETURNS BIGINT AS $gerar_id_item$
BEGIN
    RETURN 30000000 + nextval(&#39;public.item_id_seq&#39;);
END;
    $gerar_id_item$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE CURA SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.item_de_cura_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_item_de_cura()
RETURNS BIGINT AS $gerar_id_item_de_cura$
BEGIN
    RETURN 30200000 + nextval(&#39;public.item_de_cura_id_seq&#39;);
END;
    $gerar_id_item_de_cura$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE ARMADURA SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.item_de_armadura_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_item_de_armadura()
RETURNS BIGINT AS $gerar_id_item_de_armadura$
BEGIN
    RETURN 30300000 + nextval(&#39;public.item_de_armadura_id_seq&#39;);
END;
    $gerar_id_item_de_armadura$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DO TIPO ARMA SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.item_arma_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_item_arma()
RETURNS BIGINT AS $gerar_id_item_arma$
BEGIN
    RETURN 30400000 + nextval(&#39;public.item_arma_id_seq&#39;);
END;
    $gerar_id_item_arma$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE TEMPLO SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.templo_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_templo()
RETURNS BIGINT AS $gerar_id_templo$
BEGIN
    RETURN 40100000 + nextval(&#39;public.templo_id_seq&#39;);
END;
    $gerar_id_templo$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE ANDAR SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.andar_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_andar()
RETURNS BIGINT AS $gerar_id_andar$
BEGIN
    RETURN 40200000 + nextval(&#39;public.andar_id_seq&#39;);
END;
    $gerar_id_andar$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE SALA SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.sala_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_sala()
RETURNS BIGINT AS $gerar_id_sala$
BEGIN
    RETURN 40300000 + nextval(&#39;public.sala_id_seq&#39;);
END;
    $gerar_id_sala$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE CORREDOR SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.corredor_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_corredor()
RETURNS BIGINT AS $gerar_id_corredor$
BEGIN
    RETURN 40400000 + nextval(&#39;public.corredor_id_seq&#39;);
END;
    $gerar_id_corredor$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE MISS√ÉO SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.missao_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_missao()
RETURNS BIGINT AS $gerar_id_missao$
BEGIN
    RETURN 50000000 + nextval(&#39;public.missao_id_seq&#39;);
END;
    $gerar_id_missao$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE FEITI√áO DE STATUS SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.feitico_de_status_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_feitico_de_status()
RETURNS BIGINT AS $gerar_id_feitico_de_status$
BEGIN
    RETURN 60100000 + nextval(&#39;public.feitico_de_status_id_seq&#39;);
END;
    $gerar_id_feitico_de_status$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE FEITI√áO DE DANO SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.feitico_de_dano_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_feitico_de_dano()
RETURNS BIGINT AS $gerar_id_feitico_de_dano$
BEGIN
    RETURN 60200000 + nextval(&#39;public.feitico_de_dano_id_seq&#39;);
END;
    $gerar_id_feitico_de_dano$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE DI√ÅLOGOS SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.dialogos_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_dialogos()
RETURNS BIGINT AS $gerar_id_dialogos$
BEGIN
    RETURN 70000000 + nextval(&#39;public.dialogos_id_seq&#39;);
END;
    $gerar_id_dialogos$ LANGUAGE plpgsql;

-- GERA O ID DO PR√ìXIMO ITEM DE PER√çCIAS SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.pericias_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_pericia()
RETURNS BIGINT AS $gerar_id_pericia$
BEGIN
    RETURN 80000000 + nextval(&#39;public.pericias_id_seq&#39;);
END;
    $gerar_id_pericia$ LANGUAGE plpgsql;

-- GERA O ID DO INVENT√ÅRIO JOGAVEL SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.inventario_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_inventario()
RETURNS BIGINT AS $gerar_id_inventario$
BEGIN
    RETURN 90000000 + nextval(&#39;public.inventario_id_seq&#39;);
END;
    $gerar_id_inventario$ LANGUAGE plpgsql;

-- GERA O ID DE PERSONAGENS POSSUEM PER√çCIAS SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.personagens_possuem_pericias_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_personagens_possuem_pericias()
RETURNS BIGINT AS $gerar_id_personagens_possuem_pericias$
BEGIN
    RETURN 13000000 + nextval(&#39;public.personagens_possuem_pericias_id_seq&#39;);
END;
    $gerar_id_personagens_possuem_pericias$ LANGUAGE plpgsql;

-- GERA O ID DE INST√ÇNCIAS DE ITEM SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.instancia_de_item_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_instancia_de_item()
RETURNS BIGINT AS $gerar_id_instancia_de_item$
BEGIN
    RETURN 88000000 + nextval(&#39;public.instancia_de_item_id_seq&#39;);
END;
    $gerar_id_instancia_de_item$ LANGUAGE plpgsql;

-- GERA O ID DE INST√ÇNCIAS DE MONSTRO SEGUINDO O PADR√ÉO DE IDS
CREATE SEQUENCE public.instancia_de_monstro_id_seq START WITH 1;

CREATE FUNCTION public.gerar_id_instancia_de_monstro()
RETURNS BIGINT AS $gerar_id_instancia_de_monstro$
BEGIN
    RETURN 99000000 + nextval(&#39;public.instancia_de_monstro_id_seq&#39;);
END;
    $gerar_id_instancia_de_monstro$ LANGUAGE plpgsql;

-- ===============================================

--             TABELAS DO RPG

-- ===============================================

CREATE TABLE public.personagens_jogaveis(
    -- id INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    id public.id_personagem_jogavel NOT NULL PRIMARY KEY DEFAULT public.gerar_id_personagem_jogavel(),
    nome public.nome NOT NULL,
    ocupacao public.ocupacao NOT NULL,
    residencia public.residencia NOT NULL,
    local_nascimento public.local_nascimento NOT NULL,

    idade public.idade DEFAULT 18 NOT NULL,
    sexo public.sexo NOT NULL,

    forca public.atributo NOT NULL, -- 3d6
    constituicao public.atributo NOT NULL, -- 3d6
    poder public.atributo NOT NULL, -- 3d6
    destreza public.atributo NOT NULL, -- 3d6
    aparencia public.atributo NOT NULL, -- 3d6
    tamanho public.atributo NOT NULL, -- 3d6
    inteligencia public.atributo NOT NULL, -- 3d6
    educacao public.atributo NOT NULL, -- 3d6


    movimento SMALLINT NOT NULL, -- (destreza &lt; tamanho) &amp;&amp; (forca &lt; tamanho) ? movimento = 7; (destreza = tamanho) || (forca = tamanho) ? movimento = 8; (destreza &gt; tamanho) &amp;&amp; (forca &gt; tamanho) ? movimento = 9;

    sanidade_atual SMALLINT NOT NULL, -- = forca 
    insanidade_temporaria BOOLEAN, 
    insanidade_indefinida BOOLEAN, -- quando sanidade √© 0

    PM_base SMALLINT NOT NULL, 
    PM_max SMALLINT NOT NULL,

    pontos_de_vida_atual SMALLINT NOT NULL,

    -- FOREIGN KEYS
    id_sala public.id_sala,  
    id_corredor public.id_corredor, 
    id_inventario public.id_inventario NOT NULL, 
    id_armadura public.id_item_de_armadura, 
    id_arma public.id_item_arma
    -- id_tipo_personagem public.id NOT NULL

    /*

    S√£o atributos originalmente da tabela personagens_jogaveis, contudo, ferem a terceira forma normal devido a transitividade de atributos. Assim, foi criado uma view que extende esses atributos e deixa o banco normalizado.

    ideia SMALLINT, -- inteligencia x 5
    conhecimento SMALLINT, -- educacao x 5
    sorte SMALLINT,  -- poder x 5
    pts_de_vida_maximo INTEGER, -- (constituicao + tamanho) / 2
    sanidade_maxima SMALLINT, -- poder x 5
    */
);

CREATE TABLE public.npcs(
    id public.id_personagem_npc NOT NULL PRIMARY KEY DEFAULT public.gerar_id_personagem_npc(),
    nome public.nome NOT NULL,
    ocupacao public.ocupacao NOT NULL,

    idade public.idade DEFAULT 18 NOT NULL,
    sexo public.sexo NOT NULL,

    residencia public.residencia NOT NULL,
    local_nascimento public.local_nascimento DEFAULT &#39;arkham&#39; NOT NULL,

    -- FOREIGN KEYS
    id_sala public.id_sala, 
    id_corredor public.id_corredor
    -- id_tipo_personagem public.id NOT NULL
);

CREATE TABLE public.dialogos(
    id public.id_dialogo NOT NULL PRIMARY KEY DEFAULT public.gerar_id_dialogos(),
    script_dialogo public.script_dialogo NOT NULL,

    -- FOREIGN KEYS
    npc_id public.id_personagem_npc NOT NULL 

);

CREATE TABLE public.inventarios(
    -- id INTEGER NOT NULL PRIMARY KEY GENERATED ALWAYS AS IDENTITY, -- Use INTEGER diretamente
    id public.id_inventario NOT NULL PRIMARY KEY DEFAULT public.gerar_id_inventario(),
    tamanho SMALLINT NOT NULL
);

CREATE TABLE public.templos(
    id public.id_templo NOT NULL PRIMARY KEY DEFAULT public.gerar_id_templo(),
    nome public.nome NOT NULL UNIQUE,
    descricao public.descricao NOT NULL
);

CREATE TABLE public.andares(
    id public.id_andar NOT NULL PRIMARY KEY DEFAULT public.gerar_id_andar(),
    descricao public.descricao NOT NULL,

    -- FOREIGN KEYS
    id_templo public.id_templo NOT NULL DEFAULT public.gerar_id_templo(),
    sala_inicial public.id_sala NOT NULL
);

CREATE TABLE public.salas(
    id public.id_sala NOT NULL PRIMARY KEY DEFAULT public.gerar_id_sala(),
    descricao public.descricao NOT NULL
);

CREATE TABLE public.corredores(
    id public.id_corredor NOT NULL PRIMARY KEY DEFAULT public.gerar_id_corredor(),
    status BOOLEAN NOT NULL,
    descricao public.descricao NOT NULL
);

CREATE TABLE public.pericias(
    id public.id_pericia NOT NULL PRIMARY KEY DEFAULT public.gerar_id_pericia(),
    nome public.nome NOT NULL UNIQUE,
    valor SMALLINT,
    eh_de_ocupacao BOOLEAN
);

CREATE TABLE public.agressivos(
    id public.id_monstro_agressivo NOT NULL PRIMARY KEY DEFAULT public.gerar_id_monstro_agressivo(),
    nome public.nome NOT NULL UNIQUE,
    descricao public.descricao NOT NULL,
    defesa SMALLINT,
    vida SMALLINT NOT NULL,
    catalisador_agressividade public.gatilho_agressividade,
    poder SMALLINT,
    tipo_agressivo public.tipo_monstro_agressivo NOT NULL,
    velocidade_ataque SMALLINT,
    loucura_induzida SMALLINT,
    ponto_magia SMALLINT,
    dano public.dano NOT NULL,

    id_tipo_monstro INTEGER -- FK
);

CREATE TABLE public.pacificos(
    id public.id_monstro_pacifico NOT NULL PRIMARY KEY DEFAULT public.gerar_id_monstro_pacifico(),
    nome public.nome NOT NULL UNIQUE,
    descricao public.descricao NOT NULL,
    defesa SMALLINT NOT NULL,
    vida SMALLINT NOT NULL,
    motivo_passividade public.comportamento_pacifico,
    tipo_pacifico public.tipo_monstro_pacifico NOT NULL,
    conhecimento_geografico CHARACTER(128),
    conhecimento_proibido CHARACTER(128),

    id_tipo_monstro INTEGER -- FK
);

CREATE TABLE public.instancias_monstros(
    id public.id_instancia_de_monstro NOT NULL PRIMARY KEY DEFAULT public.gerar_id_instancia_de_monstro(),

    -- FOREING KEYS
    id_instancia_de_item public.id_instancia_de_item NOT NULL,
    id_sala public.id_sala,  
    id_corredor public.id_corredor,
    id_monstro public.id_monstro NOT NULL
);

CREATE TABLE public.missoes(
    id public.id_missao NOT NULL PRIMARY KEY DEFAULT public.gerar_id_missao(),
    nome public.nome NOT NULL UNIQUE,
    descricao CHARACTER(512) NOT NULL,
    tipo public.tipo_missao NOT NULL,
    ordem CHARACTER(128) NOT NULL,

    -- FOREIGN KEYS
    id_npc public.id_personagem_npc NOT NULL 
);

CREATE TABLE public.magicos(
    id public.id_item_magico NOT NULL PRIMARY KEY DEFAULT public.gerar_id_item_magico(),
    funcao public.funcao_magica NOT NULL,
    qts_usos SMALLINT NOT NULL,
    custo_sanidade SMALLINT NOT NULL,

    -- FOREIGN KEYS
    id_feitico public.id_feitico NOT NULL
);

CREATE TABLE public.curas(
    id public.id_item_de_cura NOT NULL PRIMARY KEY DEFAULT public.gerar_id_item_de_cura(),
    funcao public.funcao_cura NOT NULL,
    qts_usos SMALLINT NOT NULL,
    qtd_pontos_sanidade_recupera SMALLINT NOT NULL,
    qtd_pontos_vida_recupera SMALLINT NOT NULL
);

CREATE TABLE public.armaduras(
    id public.id_item_de_armadura NOT NULL PRIMARY KEY DEFAULT public.gerar_id_item_de_armadura(),
    atributo_necessario public.tipo_atributo_personagem,
    durabilidade SMALLINT NOT NULL,
    funcao funcao_armadura NOT NULL,
    qtd_atributo_recebe SMALLINT NOT NULL,
    qtd_atributo_necessario SMALLINT NOT NULL,
    tipo_atributo_recebe public.tipo_atributo_personagem,
    qtd_dano_mitigado SMALLINT NOT NULL,

    -- FOREIGN KEYS
    id_pericia_necessaria public.id_pericia NOT NULL
);

CREATE TABLE public.armas(
    id public.id_item_arma NOT NULL PRIMARY KEY DEFAULT public.gerar_id_item_arma(),
    atributo_necessario public.tipo_atributo_personagem,
    qtd_atributo_necessario SMALLINT NOT NULL,
    durabilidade SMALLINT NOT NULL,
    funcao public.funcao_arma,
    alcance SMALLINT,
    tipo_municao public.tipo_municao DEFAULT NULL,
    tipo_dano public.tipo_dano NOT NULL,
    dano public.dano NOT NULL,

    -- FOREIGN KEYS
    id_pericia_necessaria public.id_pericia NOT NULL
);

CREATE TABLE public.feiticos_status(
    id public.id_feitico_de_status NOT NULL PRIMARY KEY DEFAULT public.gerar_id_feitico_de_status(),
    nome public.nome NOT NULL UNIQUE,
    descricao public.descricao NOT NULL,
    qtd_pontos_de_magia SMALLINT NOT NULL,
    buff_debuff BOOLEAN NOT NULL,
    qtd_buff_debuff SMALLINT,
    status_afetado public.tipo_de_status NOT NULL
);

CREATE TABLE public.feiticos_dano(
    id public.id_feitico_de_dano NOT NULL PRIMARY KEY DEFAULT public.gerar_id_feitico_de_dano(),
    nome public.nome NOT NULL UNIQUE,
    descricao public.descricao NOT NULL,
    qtd_pontos_de_magia SMALLINT NOT NULL,
    tipo_dano public.tipo_dano NOT NULL,
    qtd_dano public.dano NOT NULL
);


CREATE TABLE public.itens(
    id public.id_item NOT NULL PRIMARY KEY DEFAULT public.gerar_id_item(),
    tipo public.tipo_item NOT NULL,
    nome public.nome NOT NULL UNIQUE,
    descricao public.descricao NOT NULL,
    valor SMALLINT
);

CREATE TABLE public.instancias_de_itens(
    id public.id_instancia_de_item NOT NULL PRIMARY KEY DEFAULT public.gerar_id_instancia_de_item(),
    durabilidade SMALLINT NOT NULL,

    -- FOREIGN KEYS
    id_sala public.id_sala,
    id_missao_requer public.id_missao,
    id_missao_recompensa public.id_missao,
    id_item public.id_item NOT NULL
);

-- ===============================================

--             TABELAS DE TIPOS

-- =============================================== 

CREATE TABLE public.tipos_personagem(
    id SERIAL NOT NULL PRIMARY KEY,
    tipo public.tipo_personagem NOT NULL
);

CREATE TABLE public.tipos_feitico(
    id SERIAL NOT NULL PRIMARY KEY,
    tipo public.funcao_feitico NOT NULL
);

CREATE TABLE public.tipos_monstro(
    id SERIAL NOT NULL PRIMARY KEY,
    tipo public.tipo_monstro NOT null
);

-- ===============================================

--  TABELAS DE RELACIONAMENTOS MUITOS PARA MUITOS

-- =============================================== 

/*
Essa se√ß√£o cont√©m as tabelas derivadas de relacionamentos N para N
*/

CREATE TABLE public.batalhas(
    id_jogador public.id_personagem_jogavel NOT NULL,
    id_monstro public.id_instancia_de_monstro NOT NULL,
    PRIMARY KEY (id_jogador, id_monstro)
);

CREATE TABLE public.entregas_missoes(
    id_jogador public.id_personagem_jogavel NOT NULL,
    id_npc public.id_personagem_npc NOT NULL,
    PRIMARY KEY (id_jogador, id_npc)
);

CREATE TABLE public.corredores_salas_destino(
    id_sala public.id_sala NOT NULL,
    id_corredor public.id_corredor NOT NULL, 
    PRIMARY KEY (id_sala, id_corredor)
);

CREATE TABLE public.inventarios_possuem_instancias_item(
    id_instancias_de_item public.id_instancia_de_item NOT NULL,
    id_inventario public.id_inventario NOT NULL,
    PRIMARY KEY (id_instancias_de_item, id_inventario)
);

CREATE TABLE public.personagens_possuem_pericias (
    valor_atual SMALLINT NOT NULL,
    PRIMARY KEY (id_personagem, id_pericia),

    -- FOREIGN KEYS
    id_personagem public.id_personagem_jogavel NOT NULL,
    id_pericia public.id_pericia NOT NULL
);

-- ===============================================

--                  VIEWS

-- =============================================== 

/* 
A view view_personagens_jogaveis_completos extende da tabela de personagens jogaveis criando os atributos: ideia, conhecimento, sorte, pts_de_vida e sanidade m√°xima. Esses atributos originalmente estavam na tabela personagens_jogaveis, contudo eles s√£o deriva√ß√µes de outros atributos da mesma tabela. Isso fere a terceira forma normal. Assim, a view criada busca garantir que esses atributos continuem a ser utilizados mas, que ao mesmo tempo deixa o banco normalizado.
*/

CREATE OR REPLACE VIEW public.view_personagens_jogaveis_completos AS
SELECT
    pj.*, -- seleciona todas as colunas originais de personagens_jogaveis
    public.calcular_ideia(pj.inteligencia) AS ideia,
    public.calcular_conhecimento(pj.educacao) AS conhecimento,
    public.calcular_sorte(pj.poder) AS sorte,
    public.calcular_pts_de_vida(pj.constituicao, pj.tamanho) AS pts_de_vida,
    public.calcular_sanidade(pj.poder) AS sanidade_maxima
FROM
    public.personagens_jogaveis pj;

-- ===============================================

--                RESTRI√á√ïES

-- ===============================================

/*
Essas pr√≥ximas tr√™s restri√ß√µes garantem que o personagem ou NPC n√£o esteja em uma sala ou corredor ao mesmo tempo, ou n√£o esteja em nenhum dos dois ao mesmo tempo
*/

ALTER TABLE public.personagens_jogaveis
ADD CONSTRAINT chk_pj_local_exclusivo
    CHECK ((id_sala IS NOT NULL AND id_corredor IS NULL) OR 
            (id_sala IS NULL AND id_corredor IS NOT NULL));

ALTER TABLE public.npcs
ADD CONSTRAINT chk_pj_local_exclusivo
    CHECK ((id_sala IS NOT NULL AND id_corredor IS NULL) OR 
            (id_sala IS NULL AND id_corredor IS NOT NULL));  

ALTER TABLE public.instancias_monstros
ADD CONSTRAINT chk_pj_local_exclusivo
    CHECK ((id_sala IS NOT NULL AND id_corredor IS NULL) OR 
            (id_sala IS NULL AND id_corredor IS NOT NULL)); 

-- ===============================================

--              CHAVES ESTRAGEIRAS 

-- ===============================================
/*
Se√ß√£o destinada a conter todos os relacionamentos que envolvem chaves estrageiras do banco, elas est√£o dividas em se√ß√µes menores, cada uma para as rela√ß√µes daquela tabela em espec√≠fico.
*/

--  PERSONAGENS JOG√ÅVEIS

ALTER TABLE public.personagens_jogaveis 
ADD CONSTRAINT fk_pj_inventario 
    FOREIGN KEY (id_inventario) 
    REFERENCES public.inventarios (id);

ALTER TABLE public.personagens_jogaveis 
ADD CONSTRAINT fk_pj_salas 
    FOREIGN KEY (id_sala) 
    REFERENCES public.salas (id);

ALTER TABLE public.personagens_jogaveis 
ADD CONSTRAINT fk_pj_corredores 
    FOREIGN KEY (id_corredor) 
    REFERENCES public.corredores (id);

ALTER TABLE public.personagens_jogaveis 
ADD CONSTRAINT fk_pj_inventario_instancia_arma
    FOREIGN KEY (id_arma) 
    REFERENCES public.instancias_de_itens (id);

ALTER TABLE public.personagens_jogaveis 
ADD CONSTRAINT fk_pj_inventario_instancia_armadura 
    FOREIGN KEY (id_armadura) 
    REFERENCES public.instancias_de_itens (id);

/*

ALTER TABLE public.personagens_jogaveis 
ADD CONSTRAINT fk_pj_tipos_personagem 
    FOREIGN KEY (id_tipo_personagem) 
    REFERENCES public.tipos_personagem (id);  

*/

-- PERSONAGENS POSSUEM PER√çCIAS

ALTER TABLE public.personagens_possuem_pericias
ADD CONSTRAINT fk_personagens_possuem_pericias_pj
    FOREIGN KEY (id_personagem)
    REFERENCES public.personagens_jogaveis(id);

ALTER TABLE public.personagens_possuem_pericias
ADD CONSTRAINT  fk_personagens_possuem_pericias_pericia
    FOREIGN KEY (id_pericia) 
    REFERENCES public.pericias(id);

-- NPCS

ALTER TABLE public.npcs 
ADD CONSTRAINT fk_npcs_salas 
    FOREIGN KEY (id_sala) 
    REFERENCES public.salas (id);

ALTER TABLE public.npcs 
ADD CONSTRAINT fk_npcs_corredores 
    FOREIGN KEY (id_corredor) 
    REFERENCES public.corredores (id);

/*

ALTER TABLE public.npcs 
ADD CONSTRAINT fk_npcs_tipos_personagem 
    FOREIGN KEY (id_tipo_personagem) 
    REFERENCES public.tipos_personagem (id);    

*/

-- DI√ÅLOGOS

ALTER TABLE public.dialogos 
ADD CONSTRAINT fk_dialogos_npc
    FOREIGN KEY (npc_id) 
    REFERENCES public.npcs (id);

-- ANDARES

ALTER TABLE public.andares 
ADD CONSTRAINT fk_andares_templo 
    FOREIGN KEY (id_templo) 
    REFERENCES public.templos (id);

ALTER TABLE public.andares 
ADD CONSTRAINT fk_andares_salas 
    FOREIGN KEY (sala_inicial) 
    REFERENCES public.salas (id);

-- CORREDORES E SALAS
ALTER TABLE public.corredores_salas_destino 
ADD CONSTRAINT fk_corredores_salas_destino_corredores 
    FOREIGN KEY (id_corredor) 
    REFERENCES public.corredores (id);

ALTER TABLE public.corredores_salas_destino 
ADD CONSTRAINT fk_corredores_salas_destino_salas 
    FOREIGN KEY (id_sala) 
    REFERENCES public.salas (id);

-- CURAS

ALTER TABLE public.curas
ADD CONSTRAINT fk_curas_itens
    FOREIGN KEY (id)
    REFERENCES public.itens (id);

-- INVENT√ÅRIO

ALTER TABLE public.inventarios_possuem_instancias_item 
ADD CONSTRAINT fk_inventarios_possuem_instancias_de_item 
    FOREIGN KEY (id_instancias_de_item) 
    REFERENCES public.instancias_de_itens (id);

ALTER TABLE public.inventarios_possuem_instancias_item 
ADD CONSTRAINT fk_inventarios_possuem_instancias_de_item_inventario 
    FOREIGN KEY (id_inventario) 
    REFERENCES public.inventarios (id);    

-- M√ÅGICOS E FEITI√áOS

ALTER TABLE public.magicos 
ADD CONSTRAINT fk_magicos_tipos_feitico 
    FOREIGN KEY (id_feitico) 
    REFERENCES public.tipos_feitico (id);

ALTER TABLE public.magicos 
ADD CONSTRAINT fk_magicos_itens 
    FOREIGN KEY (id) 
    REFERENCES public.itens (id);    

-- FEITI√áOS STATUS

ALTER TABLE public.feiticos_status 
ADD CONSTRAINT fk_feiticos_status_tipo_feitico 
    FOREIGN KEY (id) 
    REFERENCES public.tipos_feitico (id);

-- FEITI√áOS DANO

ALTER TABLE public.feiticos_dano 
ADD CONSTRAINT fk_feiticos_dano_tipo_feitico 
    FOREIGN KEY (id) 
    REFERENCES public.tipos_feitico (id);

-- INST√ÇNCIAS DE MONSTRO

ALTER TABLE public.instancias_monstros 
ADD CONSTRAINT fk_instancias_monstro_salas 
    FOREIGN KEY (id_sala) 
    REFERENCES public.salas (id);

ALTER TABLE public.instancias_monstros 
ADD CONSTRAINT fk_instancias_monstro_corredores 
    FOREIGN KEY (id_corredor) 
    REFERENCES public.corredores (id);

ALTER TABLE public.instancias_monstros
ADD CONSTRAINT fk_instancias_monstro_instancia_de_item 
    FOREIGN KEY (id_instancia_de_item) 
    REFERENCES public.instancias_de_itens (id);

-- MONSTROS PAC√çFICOS

ALTER TABLE public.pacificos 
ADD CONSTRAINT fk_pacificos_tipo_monstro 
    FOREIGN KEY (id_tipo_monstro) 
    REFERENCES public.tipos_monstro (id);

-- MONSTROS AGRESSIVOS

ALTER TABLE public.agressivos 
ADD CONSTRAINT fk_agressivos_tipo_monstro 
    FOREIGN KEY (id_tipo_monstro) 
    REFERENCES public.tipos_monstro (id);

-- BATALHAS

ALTER TABLE public.batalhas 
ADD CONSTRAINT fk_batalhas_personagens_jogaveis 
    FOREIGN KEY (id_jogador) 
    REFERENCES public.personagens_jogaveis (id);

ALTER TABLE public.batalhas 
ADD CONSTRAINT fk_batalhas_monstro 
    FOREIGN KEY (id_monstro) 
    REFERENCES public.instancias_monstros (id);

-- MISS√ïES

ALTER TABLE public.missoes 
ADD CONSTRAINT fk_missoes_npcs 
    FOREIGN KEY (id_npc) 
    REFERENCES public.npcs (id);

-- ENTREGAS DE MISS√ïES

ALTER TABLE public.entregas_missoes 
ADD CONSTRAINT fk_entregas_missoes_personagens_jogaveis 
    FOREIGN KEY (id_jogador) 
    REFERENCES public.personagens_jogaveis (id);

ALTER TABLE public.entregas_missoes 
ADD CONSTRAINT fk_entregas_missoes_npcs 
    FOREIGN KEY (id_npc) 
    REFERENCES public.npcs (id);

-- INST√ÇNCIAS DE ITENS

ALTER TABLE public.instancias_de_itens 
ADD CONSTRAINT fk_instancias_de_itens_missoes_recompensa
    FOREIGN KEY (id_missao_recompensa) 
    REFERENCES public.missoes (id);

ALTER TABLE public.instancias_de_itens 
ADD CONSTRAINT fk_instancias_de_itens_missoes_requer
    FOREIGN KEY (id_missao_requer) 
    REFERENCES public.missoes (id);

ALTER TABLE public.instancias_de_itens 
ADD CONSTRAINT fk_instancias_de_item_itens
    FOREIGN KEY (id_item) 
    REFERENCES public.itens (id);  

ALTER TABLE public.instancias_de_itens 
ADD CONSTRAINT fk_instancias_de_item_salas 
    FOREIGN KEY (id_sala) 
    REFERENCES public.salas (id);  

-- ARMADURAS

ALTER TABLE public.armaduras 
ADD CONSTRAINT fk_armaduras_pericia_necessaria
    FOREIGN KEY (id_pericia_necessaria) 
    REFERENCES public.pericias (id);

ALTER TABLE public.armaduras 
ADD CONSTRAINT fk_armaduras_itens
    FOREIGN KEY (id) 
    REFERENCES public.itens (id);    

 -- ARMAS

ALTER TABLE public.armas 
ADD CONSTRAINT fk_armas_pericia_necessaria
    FOREIGN KEY (id_pericia_necessaria) 
    REFERENCES public.pericias (id);   

ALTER TABLE public.armas 
ADD CONSTRAINT fk_armas_itens
    FOREIGN KEY (id) 
    REFERENCES public.itens (id); 

-- TIPOS PERSONAGEM
/*
ALTER TABLE public.tipos_personagem
ADD CONSTRAINT fk_tipos_personagem_personagens_jogaveis
    FOREIGN KEY (id)
    REFERENCES public.personagens_jogaveis (id);

ALTER TABLE public.tipos_personagem
ADD CONSTRAINT fk_tipos_personagem_npc
    FOREIGN KEY (id)
    REFERENCES public.npcs (id);
*/
</code></pre></div>
<hr />
<h2 id="bibliografia">üìö Bibliografia</h2>
<blockquote>
<p><a id="REF1" href="#FRM1">[1]</a> ELMASRI, R.; NAVATHE, S. B. <em>Sistemas de Banco de Dados</em>. 7. ed. Pearson Education do Brasil, 2018.  </p>
<p><a id="REF2" href="#FRM2">[2]</a> DATE, C. J. <em>An Introduction to Database Systems</em>. 8. ed. Addison-Wesley, 2003.  </p>
<p><a id="REF3" href="#FRM3">[3]</a> SILBERSCHATZ, A.; KORTH, H. F.; SUDARSHAN, S. <em>Database System Concepts</em>. 7. ed. McGraw-Hill Education, 2019.</p>
</blockquote>
<h2 id="historico-de-versoes">üìë Hist√≥rico de Vers√µes</h2>
<table>
<thead>
<tr>
<th style="text-align: center;">Vers√£o</th>
<th>Descri√ß√£o</th>
<th>Autor(es)</th>
<th style="text-align: center;">Data de Produ√ß√£o</th>
<th>Revisor(es)</th>
<th style="text-align: center;">Data de Revis√£o</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><code>1.0</code></td>
<td>Cria√ß√£o do documento</td>
<td><a href="https://github.com/JJOAOMARCOSS">Jo√£o Marcos</a></td>
<td style="text-align: center;">16/06/25</td>
<td><a href="https://github.com/wChrstphr">Christopher</a></td>
<td style="text-align: center;">16/06/25</td>
</tr>
<tr>
<td style="text-align: center;"><code>1.1</code></td>
<td>Corrigindo o documento e adicionado o DDL completo</td>
<td><a href="https://github.com/JJOAOMARCOSS">Jo√£o Marcos</a></td>
<td style="text-align: center;">16/06/25</td>
<td><a href="https://github.com/wChrstphr">Christopher</a></td>
<td style="text-align: center;">16/06/25</td>
</tr>
</tbody>
</table>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Voltar para o topo
</button>
        
      </main>
      
        <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin: 2rem auto 0; max-width: 800px; padding: 10px; text-align: center;">
  <!-- Cayo -->
  <a href="https://github.com/Cayoalencar" target="_blank" title="Cayo Alencar" 
     style="text-decoration: none; flex: 1 0 auto; max-width: 80px;">
    <img src="https://github.com/Cayoalencar.png" alt="Cayo" 
         style="width: 50px; height: 50px; border-radius: 50%; display: block; margin: 0 auto;">
    <span style="display: block; margin-top: 0.3rem; font-size: 0.7rem; line-height: 1.1; color: var(--md-default-fg-color)">
      Cayo
    </span>
  </a>

  <!-- Christopher -->
  <a href="https://github.com/wChrstphr" target="_blank" title="Christopher Paraizo" 
     style="text-decoration: none; flex: 1 0 auto; max-width: 80px;">
    <img src="https://github.com/wChrstphr.png" alt="Christopher" 
         style="width: 50px; height: 50px; border-radius: 50%; display: block; margin: 0 auto;">
    <span style="display: block; margin-top: 0.3rem; font-size: 0.7rem; line-height: 1.1; color: var(--md-default-fg-color)">
      Christopher
    </span>
  </a>

  <!-- Igor -->
  <a href="https://github.com/igorvdaniel" target="_blank" title="Igor Daniel" 
     style="text-decoration: none; flex: 1 0 auto; max-width: 80px;">
    <img src="https://github.com/igorvdaniel.png" alt="Igor" 
         style="width: 50px; height: 50px; border-radius: 50%; display: block; margin: 0 auto;">
    <span style="display: block; margin-top: 0.3rem; font-size: 0.7rem; line-height: 1.1; color: var(--md-default-fg-color)">
      Igor
    </span>
  </a>

  <!-- Jo√£o Marcos -->
  <a href="https://github.com/JJOAOMARCOSS" target="_blank" title="Jo√£o Marcos" 
     style="text-decoration: none; flex: 1 0 auto; max-width: 80px;">
    <img src="https://github.com/JJOAOMARCOSS.png" alt="Jo√£o Marcos" 
         style="width: 50px; height: 50px; border-radius: 50%; display: block; margin: 0 auto;">
    <div style="margin-top: 0.3rem; font-size: 0.7rem; line-height: 1; color: var(--md-default-fg-color);">
      <span style="display: block">Jo√£o</span>
      <span style="display: block">Marcos</span>
    </div>
  </a>

  <!-- Luiz -->
  <a href="https://github.com/luizfaria1989" target="_blank" title="Luiz Faria" 
     style="text-decoration: none; flex: 1 0 auto; max-width: 80px;">
    <img src="https://github.com/luizfaria1989.png" alt="Luiz" 
         style="width: 50px; height: 50px; border-radius: 50%; display: block; margin: 0 auto;">
    <span style="display: block; margin-top: 0.3rem; font-size: 0.7rem; line-height: 1.1; color: var(--md-default-fg-color)">
      Luiz
    </span>
  </a>
</div>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "content.tabs.link", "header.autohide", "navigation.instant", "navigation.top", "navigation.tracking"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado para \u00e1rea de transfer\u00eancia", "clipboard.copy": "Copiar para \u00e1rea de transfer\u00eancia", "search.result.more.one": "mais 1 nesta p\u00e1gina", "search.result.more.other": "# mais nesta p\u00e1gina", "search.result.none": "Nenhum documento encontrado", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Digite para iniciar a busca", "search.result.term.missing": "Ausente", "select.version": "Selecione a vers\u00e3o"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>